---
apiVersion: v1
kind: ConfigMap
metadata:
  name: gatus-kubernetes-endpoints
  labels:
    gatus.io/enabled: "true"
data:
  kubernetes-services.yaml: |
    endpoints:
      # External Services (no dedicated ConfigMaps)
      - name: Puppet Forge API
        url: "https://forgeapi.puppet.com/v3/modules"
        group: "Puppet Lab"
        description: "Puppet Forge API Availability"
        tags: ["puppet", "api", "infrastructure", "critical"]
        interval: 5m
        client:
          dns-resolver: tcp://1.1.1.1:53
          headers:
            Authorization: "Bearer $${PUPPET_FORGE_TOKEN}"
        conditions:
          - "[STATUS] == 200"
          - "[RESPONSE_TIME] < 5000"
          - "[BODY] != pat(.*(unauthorized|forbidden|expired).*)i"
        alerts:
          - type: pushover
