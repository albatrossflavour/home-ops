#shellcheck disable=SC2148,SC2155
export KUBECONFIG="$(expand_path ./kubeconfig)"
export SOPS_AGE_KEY_FILE="$(expand_path ./age.key)"
# Venv
PATH_add "$(expand_path ./.venv/bin)"
export VIRTUAL_ENV="$(expand_path ./.venv)"
export PYTHONDONTWRITEBYTECODE="1"
# Talos
export TALOSCONFIG="$(expand_path ./kubernetes/bootstrap/talos/clusterconfig/talosconfig)"
# Bin
PATH_add "$(expand_path ./.bin)"

# Enhanced Git Functions (home-ops specific)
if [[ -f "$(expand_path ./scripts/enhanced-gg.sh)" ]]; then
    # First, save the original gg function if it exists
    if type gg &>/dev/null; then
        # Rename existing gg to gg_system so we can restore it later
        eval "$(declare -f gg | sed 's/^gg/gg_system/')"
    fi

    # shellcheck source=scripts/enhanced-gg.sh
    source "$(expand_path ./scripts/enhanced-gg.sh)"

    # Force override the gg function
    unset -f gg 2>/dev/null
    # shellcheck source=scripts/enhanced-gg.sh
    source "$(expand_path ./scripts/enhanced-gg.sh)"

    echo "ðŸš€ Enhanced git functions loaded for home-ops:"
    echo "   gg -> auto-retry with pre-commit fixing (OVERRIDDEN)"
    echo "   gg_original -> your original gg behavior"
    echo "   gg_quick -> quick commit without pause"
    echo "   gg_system -> your previous gg function (if any)"
fi

# Scripts directory
PATH_add "$(expand_path ./scripts)"
